<!DOCTYPE html>
<html>

<head>
    <style>
        .no-select {
            user-select: none;
            /* Standard syntax */
            -webkit-user-select: none;
            /* Chrome, Safari, Opera */
            -moz-user-select: none;
            /* Firefox */
            -ms-user-select: none;
            /* IE 10+ */
        }
    </style>
    <script src="../js/baseExperiment.js"></script>
    <script src="../js/utils.js"></script>
    <script src="js/tubeExperiment.js"></script>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/experiments.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">

</head>

<body class="d-flex flex-column justify-content-center align-items-center vh-100">

    <div id="passwordSection" style="display:none" class="text-center">
        <H1>Test Verification</H1>
        <p>Please enter the password to start the experiment:</p>
        <input type="password" id="passwordInput" />
        <button id="submitPassword" class="btn btn-primary">Submit</button>
        <p id="passwordError" style="color:red;display:none">Incorrect password. Please try again.</p>
    </div>
    
    <div id='initialInstructionSection'  style="display:none"  class="p-4 col-md-12 text-center">
        <H1>The Tipping Point Game</H1>
        <p> 
            Welcome to the Tube Tilt Experiment! Your task is to determine the 'critical angle' at which a virtual tube will fall over. Think carefully about the exact point where the tube transitions from standing straight to falling down. </p>
        <p>
            <iframe frameborder="0" scrolling="no" marginheight="0" marginwidth="0" width="560" height="340"
                type="text/html"
                src="https://www.youtube.com/embed/rgWQBKCgRdc?autoplay=0&fs=0&iv_load_policy=3&showinfo=0&rel=0&cc_load_policy=0&start=0&end=0"></iframe>
        </p>
        <p> The tube will be sitting on a table, and the direction of the tilt is indicated by an arrow. Use the left and right arrow keys to adjust the tilt, and press the space bar when you believe you've reached this critical angle.  </p>
        <p> Your precision in finding this delicate balance will be key to the experiment's success. Good luck! </p>
        <div class="d-flex justify-content-center mt-2"> <button id="closeButton" class="btn btn-primary">Start
                Experiment</button> </div>
    </div>
    <div id="gamesection" class="container">
        <p> Find the Critical Angle! Use <button class="arrow-btn left-arrow"></button> <button class="arrow-btn right-arrow"></button> to tilt
            the tube in the direction indicated. </p>
        <p> </p>
        <svg width="1023" height="248" viewBox="0 0 1023 248">
            <rect width="100%" height="100%" fill="skyblue" />
            <image id="leftface" style="display:none" xlink:href="" width="200" height="200" x="0" y="10" />
            <image id="rightface" style="display:none" xlink:href="" width="200" height="200" x="823" y="10" />
            <rect id="platform" x="244" y="160" width="540" height="15" fill="brown" />
            <rect id="tube" x="502" y="30" width="24" height="130" fill="white" stroke="black" />
            <line x1="514" y1="15" x2="514" y2="163" style="stroke:black" />
            <rect id="bottom" x="0" y="175" width="1023" height="74" fill="white" />
            <polygon id="arrow" points="473,215 549,215 549,225 573,210 549,195 549,205 473,205" fill="green" />
        </svg>
        <p> </p>
        <p> When you think you have found the tipping point, press <span class="space-bar">SPACE BAR</span>. </p>
    </div>

    <div id='formsection' style="display:none">

        <H1> Part 2: Survey</H1>
        <p>

            Thank you for playing. You will now click the link below to fill out a few questions about the game you just
            played.
        </p>

        <button id="formbutton" type="button" onclick="">Continue to Survey</button>
    </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const button = document.getElementById('closeButton');
            button.addEventListener('click', handleStartGame);
            const access_code = getQueryParam('AC');
            if (!access_code) {
                document.getElementById('initialInstructionSection').style.display = 'block';
                document.getElementById('passwordSection').style.display = 'none';
            }
        });

        function handleStartGame(event) {
            document.getElementById('passwordSection').style.display = 'none';
            document.getElementById('initialInstructionSection').style.display = 'none';
            document.getElementById('gamesection').style.display = 'flex';
            }

    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>

</html>